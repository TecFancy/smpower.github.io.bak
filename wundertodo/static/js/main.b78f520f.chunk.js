(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){e.exports=a(56)},35:function(e,t,a){},37:function(e,t,a){},39:function(e,t,a){},41:function(e,t,a){},43:function(e,t,a){},45:function(e,t,a){},47:function(e,t,a){},49:function(e,t,a){},51:function(e,t,a){},53:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"login",function(){return y}),a.d(n,"regist",function(){return w});var s=a(0),r=a.n(s),i=a(17),o=a.n(i),c=a(57),u=a(22),l=a(11),m=a(20),p=a(13),g=a(3),h=a(4),d=a(6),E=a(5),b=a(7),v=a(2),I=a(1),f=a.n(I),O=(a(35),function(e){function t(){return Object(g.a)(this,t),Object(d.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("span",{className:"tip-box"},this.props.value)}}]),t}(s.Component)),j=function(e){var t=e.onNameInputChange,a=e.onEmailInputChange,n=e.onPasswordInputChange,s=e.nameInputValue,i=e.emailInputValue,o=e.passwordInputValue,c=e.nameInputErrorMsg,u=e.emailInputErrorMsg,l=e.passwordInputErrorMsg,m=e.onSubmit;return r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"register"},r.a.createElement("div",{className:"register-logo"},r.a.createElement("i",{className:"register-logo-icon"}),r.a.createElement("h1",{className:"register-logo-title"},"Get Wundertodo For Free")),r.a.createElement("div",{className:"register-inner"},r.a.createElement("div",{className:"register-item register-name"},r.a.createElement("i",{className:"register-item-icon register-name-icon"}),r.a.createElement("input",{type:"text",className:"register-item-input register-name-input",placeholder:"Name",onChange:t,value:s}),r.a.createElement("div",{className:""===c?"register-item-tip register-name-tip":"register-item-tip register-name-tip active"},r.a.createElement(O,{value:c}))),r.a.createElement("div",{className:"register-item register-email"},r.a.createElement("i",{className:"register-item-icon register-email-icon"}),r.a.createElement("input",{type:"text",className:"register-item-input register-email-input",placeholder:"Email",onChange:a,value:i}),r.a.createElement("div",{className:""===u?"register-item-tip register-email-tip":"register-item-tip register-email-tip active"},r.a.createElement(O,{value:u}))),r.a.createElement("div",{className:"register-item register-password"},r.a.createElement("i",{className:"register-item-icon register-password-icon"}),r.a.createElement("input",{type:"password",className:"register-item-input register-password-input",placeholder:"Password",onChange:n,value:o}),r.a.createElement("div",{className:""===l?"register-item-tip register-password-tip":"register-item-tip register-password-tip active"},r.a.createElement(O,{value:l}))),r.a.createElement("div",{className:"register-item register-submit"},r.a.createElement("button",{type:"button",className:"register-submit-btn",onClick:m},"Create Free Account"))),r.a.createElement("div",{className:"register-login"},r.a.createElement("span",{className:"register-login-text"},"Have an account already?",r.a.createElement("a",{href:"/#/login"},"Sign in")))))},y={path:"/todo/login",params:["username","password"],des:"\u7528\u6237\u767b\u5f55"},w={path:"/todo/regist",params:["username","email","password"],des:"\u7528\u6237\u6ce8\u518c"},N=function(e){return{type:"REGIST/FAILURE",err:e}},C=a(23),S={isNonEmpty:function(e,t){if(""===e)return t},minLength:function(e,t,a){if(e.length<t)return a},maxLength:function(e,t,a){if(e.length>t)return a},isMobile:function(e,t){if(!/(^1[3|5|8][0-9]{9}$)/g.test(e))return t},isEmail:function(e,t){if(!/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/g.test(e))return t}},k=function(){function e(){Object(g.a)(this,e),this.cache=[]}return Object(h.a)(e,[{key:"add",value:function(e,t){var a=this;t.forEach(function(t,n){!function(t){var n=t.strategy.split(":"),s=t.errorMsg;a.cache.push(function(){var t=n.shift();return n.unshift(e),n.push(s),S[t].apply(S,Object(C.a)(n))})}(t)})}},{key:"start",value:function(){for(var e=0,t=this.cache.length;e<t;e++){var a=this.cache[e]();if(a)return a}}}]),e}(),M=(a(37),function(e){function t(){var e;return Object(g.a)(this,t),(e=Object(d.a)(this,Object(E.a)(t).apply(this,arguments))).onChange=e.onChange.bind(Object(v.a)(Object(v.a)(e))),e.setErrorMsg=e.setErrorMsg.bind(Object(v.a)(Object(v.a)(e))),e.onNameInputChange=e.onNameInputChange.bind(Object(v.a)(Object(v.a)(e))),e.onEmailInputChange=e.onEmailInputChange.bind(Object(v.a)(Object(v.a)(e))),e.onPasswordInputChange=e.onPasswordInputChange.bind(Object(v.a)(Object(v.a)(e))),e.onSubmit=e.onSubmit.bind(Object(v.a)(Object(v.a)(e))),e.state={nameInputValue:"",emailInputValue:"",passwordInputValue:"",nameInputErrorMsg:"",emailInputErrorMsg:"",passwordInputErrorMsg:"",errorMsg:null},e}return Object(b.a)(t,e),Object(h.a)(t,[{key:"onChange",value:function(){var e=this.context.store.getState().register,t=e.status,a=e.isRegisted;"success"===t&&a&&this.props.history.replace("/login")}},{key:"setErrorMsg",value:function(e,t){return t?void this.setState(Object(p.a)({},e,t)):void this.setState(Object(p.a)({},e,""))}},{key:"onNameInputChange",value:function(e){this.setState({nameInputValue:e.target.value.trim()});var t=new k;t.add(e.target.value.trim(),[{strategy:"isNonEmpty",errorMsg:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"},{strategy:"minLength: 2",errorMsg:"\u7528\u6237\u540d\u5e94\u5927\u4e8e 2 \u4f4d"},{strategy:"maxLength: 20",errorMsg:"\u7528\u6237\u540d\u5e94\u5c0f\u4e8e 20 \u4f4d"}]);var a=t.start();this.setErrorMsg("nameInputErrorMsg",a)}},{key:"onEmailInputChange",value:function(e){this.setState({emailInputValue:e.target.value.trim()});var t=new k;t.add(e.target.value.trim(),[{strategy:"isNonEmpty",errorMsg:"\u8bf7\u8f93\u5165\u90ae\u7bb1"},{strategy:"isEmail",errorMsg:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1"}]);var a=t.start();this.setErrorMsg("emailInputErrorMsg",a)}},{key:"onPasswordInputChange",value:function(e){this.setState({passwordInputValue:e.target.value.trim()});var t=new k;t.add(e.target.value.trim(),[{strategy:"isNonEmpty",errorMsg:"\u8bf7\u8f93\u5165\u5bc6\u7801"},{strategy:"minLength: 8",errorMsg:"\u5bc6\u7801\u957f\u5ea6\u5e94\u4e0d\u5c0f\u4e8e 8 \u4f4d"},{strategy:"maxLength: 16",errorMsg:"\u5bc6\u7801\u957f\u5ea6\u5e94\u4e0d\u5927\u4e8e 16 \u4f4d"}]);var a=t.start();this.setErrorMsg("passwordInputErrorMsg",a)}},{key:"onSubmit",value:function(){var e=this.state,t=e.nameInputErrorMsg,a=e.emailInputErrorMsg,s=e.passwordInputErrorMsg;if(""===t&&""===a&&""===s)this.context.store.dispatch((r=this.state.nameInputValue,i=this.state.emailInputValue,o=this.state.passwordInputValue,function(e){e({type:"REGIST/STARTED"}),fetch("".concat("http://localhost:1115").concat(n.regist.path),{method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify({username:r,email:i,password:o})}).then(function(t){if(200===t.status)return t.json();e(N())}).then(function(t){e(function(e){return{type:"REGIST/SUCCESS",resJson:e}}(t))}).catch(function(t){e(N(t))})}));else var r,i,o}},{key:"componentWillMount",value:function(){sessionStorage.isUserLogined&&this.props.history.push("/")}},{key:"render",value:function(){return r.a.createElement(j,{onNameInputChange:this.onNameInputChange,onEmailInputChange:this.onEmailInputChange,onPasswordInputChange:this.onPasswordInputChange,nameInputValue:this.state.nameInputValue,emailInputValue:this.state.emailInputValue,passwordInputValue:this.state.passwordInputValue,nameInputErrorMsg:this.state.nameInputErrorMsg,emailInputErrorMsg:this.state.emailInputErrorMsg,passwordInputErrorMsg:this.state.passwordInputErrorMsg,onSubmit:this.onSubmit})}},{key:"componentDidMount",value:function(){this.setState({unsubscribe:this.context.store.subscribe(this.onChange)})}}]),t}(s.Component));M.contextTypes={store:f.a.object};var F=M,P=a(12),V=function(e){var t=e.onEmailInputFocus,a=e.onEmailInputBlur,n=e.onEmailInputChange,s=e.emailInputValue,i=e.emailPlaceholderClass,o=e.onPasswordInputFocus,c=e.onPasswordInputBlur,u=e.onPasswordInputChange,l=e.passwordInputValue,m=e.passwordPlaceholderClass,p=e.onSignin;return r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"login-logo"},r.a.createElement("i",{className:"login-logo-icon"})),r.a.createElement("div",{className:"login-inner"},r.a.createElement("div",{className:"login-item login-email"},r.a.createElement("i",{className:"login-item-icon login-email-icon"}),r.a.createElement("input",{type:"text",autoFocus:!0,className:"login-item-input login-email-input",onFocus:t,onBlur:a,onChange:n,value:s}),r.a.createElement("span",{className:"login-item-placeholder login-email-placeholder "+i},"Email")),r.a.createElement("div",{className:"login-item login-password"},r.a.createElement("i",{className:"login-item-icon login-password-icon"}),r.a.createElement("input",{type:"password",className:"login-item-input login-password-input",onFocus:o,onBlur:c,onChange:u,value:l}),r.a.createElement("span",{className:"login-item-placeholder login-password-placeholder "+m},"Password")),r.a.createElement("div",{className:"login-item login-submit"},r.a.createElement("button",{type:"button",className:"login-submit-signin",onClick:p},"Sign in")),r.a.createElement("div",{className:"login-item login-link"},r.a.createElement("a",{href:"/#/findpwd",className:"login-link-item login-link-forgot"},"Forgot your password?"),r.a.createElement("a",{href:"/#/register",className:"login-link-item login-link-register"},"Create Account")))))},x=function(e){return{type:"LOGIN/FAILURE",error:e}},T=(a(39),function(e){function t(){var e;return Object(g.a)(this,t),(e=Object(d.a)(this,Object(E.a)(t).apply(this,arguments))).onChange=e.onChange.bind(Object(v.a)(Object(v.a)(e))),e.onEmailInputFocus=e.onEmailInputFocus.bind(Object(v.a)(Object(v.a)(e))),e.onEmailInputBlur=e.onEmailInputBlur.bind(Object(v.a)(Object(v.a)(e))),e.onEmailInputChange=e.onEmailInputChange.bind(Object(v.a)(Object(v.a)(e))),e.onPasswordInputFocus=e.onPasswordInputFocus.bind(Object(v.a)(Object(v.a)(e))),e.onPasswordInputBlur=e.onPasswordInputBlur.bind(Object(v.a)(Object(v.a)(e))),e.onPasswordInputChange=e.onPasswordInputChange.bind(Object(v.a)(Object(v.a)(e))),e.onSignin=e.onSignin.bind(Object(v.a)(Object(v.a)(e))),e.state={emailInputFocused:!1,passwordInputFocused:!1,emailInputValue:"",passwordInputValue:""},e}return Object(b.a)(t,e),Object(h.a)(t,[{key:"onChange",value:function(){var e=this.context.store.getState().login,t=e.status,a=e.isLogined;if("success"===t&&a){var n=this.context.store.getState().login,s=n.username,r=n.cryemail,i=n.crypwd;return sessionStorage.setItem("isUserLogined",!0),sessionStorage.setItem("username",s),sessionStorage.setItem("cryemail",r),sessionStorage.setItem("crypwd",i),void this.props.history.replace("/")}}},{key:"onEmailInputFocus",value:function(){this.setState({emailInputFocused:!0})}},{key:"onEmailInputBlur",value:function(){""===this.state.emailInputValue.trim()&&this.setState({emailInputFocused:!1})}},{key:"onEmailInputChange",value:function(e){this.setState({emailInputValue:e.target.value})}},{key:"onPasswordInputFocus",value:function(){this.setState({passwordInputFocused:!0})}},{key:"onPasswordInputBlur",value:function(){""===this.state.passwordInputValue.trim()&&this.setState({passwordInputFocused:!1})}},{key:"onPasswordInputChange",value:function(e){this.setState({passwordInputValue:e.target.value})}},{key:"onSignin",value:function(){var e,t,a=this.state,s=a.emailInputValue,r=a.passwordInputValue;if(""===s||""===r)return alert("\u8bf7\u5b8c\u5584\u767b\u5f55\u4fe1\u606f"),void console.log("\u8bf7\u5b8c\u5584\u767b\u5f55\u4fe1\u606f");this.context.store.dispatch((e=s,t=r,function(a){fetch("".concat("http://localhost:1115").concat(n.login.path),{method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify({email:e,password:t})}).then(function(e){if(200===e.status)return e.json();a(x())}).then(function(e){a(function(e){return{type:"LOGIN/SUCCESS",resJson:e}}(e))}).catch(function(e){a(x(e))})}))}},{key:"componentWillMount",value:function(){sessionStorage.isUserLogined&&this.props.history.push("/")}},{key:"render",value:function(){return r.a.createElement(V,{onEmailInputFocus:this.onEmailInputFocus,onEmailInputBlur:this.onEmailInputBlur,onEmailInputChange:this.onEmailInputChange,emailInputValue:this.state.emailInputValue,emailPlaceholderClass:this.state.emailInputFocused?"active":"",onPasswordInputFocus:this.onPasswordInputFocus,onPasswordInputBlur:this.onPasswordInputBlur,onPasswordInputChange:this.onPasswordInputChange,passwordInputValue:this.state.passwordInputValue,passwordPlaceholderClass:this.state.passwordInputFocused?"active":"",onSignin:this.onSignin})}},{key:"componentDidMount",value:function(){this.setState({unsubscribe:this.context.store.subscribe(this.onChange)})}},{key:"componentWillUnmount",value:function(){}}]),t}(s.Component));T.contextTypes={store:f.a.object};var L=T,B=Object(l.c)({register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{status:"loading"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REGIST/STARTED":return{status:"loading"};case"REGIST/SUCCESS":return Object(P.a)({status:"success"},t.resJson);case"REGIST/FAILURE":return Object(P.a)({status:"failure"},t.error);default:return e}},login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{status:"loading"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN/STARTED":return{status:"loading"};case"LOGIN/SUCCESS":return Object(P.a)({status:"success"},t.resJson);case"LOGIN/FAILURE":return Object(P.a)({status:"failure"},t.error);default:return e}}}),U=Object(l.d)(B,Object(l.a)(m.a)),R=(a(41),a(58)),G=(a(43),function(e){function t(){return Object(g.a)(this,t),Object(d.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"search-toolbar"},r.a.createElement("div",{className:"search-menu-wrapper"},r.a.createElement("i",{className:"search-menu-icon"})),r.a.createElement("div",{className:"search-input-wrapper"},r.a.createElement("input",{className:"search-input",type:"text"})),r.a.createElement("div",{className:"search-icon-wrapper"},r.a.createElement("i",{className:"search-icon"})))}}]),t}(s.Component)),A=(a(45),function(e){function t(){return Object(g.a)(this,t),Object(d.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"user-toolbar"},r.a.createElement("div",{className:"user"},r.a.createElement("i",{className:"user-avatar"}),r.a.createElement("span",{className:"user-name"},"rf.wangchn"),r.a.createElement("i",{className:"user-arrow-icon"}),r.a.createElement("span",{className:"sync"})),r.a.createElement("div",{className:"stream-counts"},r.a.createElement("i",{className:"bell-icon"}),r.a.createElement("i",{className:"conversation-icon"})))}}]),t}(s.Component)),J=(a(47),function(e){function t(){return Object(g.a)(this,t),Object(d.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"lists-toolbar"},"ListsToolbar Component")}}]),t}(s.Component)),W=(a(49),function(e){function t(){return Object(g.a)(this,t),Object(d.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"create-toolbar"},"CreateToolbar Component")}}]),t}(s.Component)),D=(a(51),function(e){function t(){return Object(g.a)(this,t),Object(d.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"navigation active"},r.a.createElement("div",{className:"navigation-inner"},r.a.createElement(G,null),r.a.createElement(A,null),r.a.createElement(J,null),r.a.createElement(W,null)))}}]),t}(s.Component)),$=function(e){function t(){return Object(g.a)(this,t),Object(d.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"content"},"Content Component")}}]),t}(s.Component),H=(a(53),function(e){function t(){return Object(g.a)(this,t),Object(d.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"componentWillMount",value:function(){sessionStorage.isUserLogined||this.props.history.replace("/login")}},{key:"render",value:function(){return r.a.createElement("div",{className:"main"},r.a.createElement(D,null),r.a.createElement($,null))}}]),t}(s.Component));H.contextTypes={store:f.a.object};var q=[{path:"/register",component:F},{path:"/login",component:L},{exact:!0,path:"/",component:H}],z=function(e){function t(){return Object(g.a)(this,t),Object(d.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},q.map(function(e,t){return r.a.createElement(R.a,{key:t,exact:e.exact,path:e.path,component:e.component})}))}}]),t}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(u.a,{store:U},r.a.createElement(c.a,null,r.a.createElement(z,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[25,2,1]]]);
//# sourceMappingURL=main.b78f520f.chunk.js.map